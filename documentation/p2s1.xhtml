<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>io7m-jfprop 0.3.0 Documentation: 2.1. Overview</title><link rel="stylesheet" type="text/css" href="jstructural-2.0.0-layout.css"/><link rel="stylesheet" type="text/css" href="jstructural-2.0.0-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st200_body"><div class="brand">
  <div class="brand_left">
    <a href="http://io7m.com/">io7m</a>
  </div>
  <div class="brand_right">
    <a href="http://io7m.github.io/jfprop">io7m-jfprop</a> 0.3.0
  </div>
</div><div class="st200_navbar st200_navbar_top"><table class="st200_navbar_table" summary="Navigation bar"><tr><td class="st200_navbar_prev_title_cell">2. User Guide</td><td class="st200_navbar_up_title_cell">2. User Guide</td><td class="st200_navbar_next_title_cell">2.2. Configuration</td></tr><tr><td class="st200_navbar_prev_file_cell"><a href="p2.xhtml#st200_p2">Previous</a></td><td class="st200_navbar_up_file_cell"><a href="p2.xhtml#st200_p2">Up</a></td><td class="st200_navbar_next_file_cell"><a href="p2s2.xhtml#st200_p2s2">Next</a></td></tr></table><hr class="st200_hr"/></div><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p2s1" href="#st200_p2s1">2.1</a></div><div class="st200_section_title">Overview</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg1" href="#st200_p2s1pg1">1</a></div><div class="st200_paragraph">
      The <span class="st200_term package">io7m-jfprop</span> package implements a
      simple system for keeping <a class="st200_link_external" href="http://fossil-scm.org">Fossil</a>
      repositories up-to-date and synchronized with remote servers.
    </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg2" href="#st200_p2s1pg2">2</a></div><div class="st200_paragraph">
      The main use case is that of synchronizing private 
      (but "<span class="st200_term term">canonical</span>") repositories with a public mirror.
      An organization, <span class="st200_term term">ExampleCorp</span>, using <a class="st200_link_external" href="http://fossil-scm.org">Fossil</a>
      may have something approximating the following configuration:
    </div></div><div class="st200_formal_item diagram"><div class="st200_formal_item_title diagram"><a id="st200_p2s1fo1" href="#st200_p2s1fo1">2.1.1. Organization</a></div><img class="st200_image" alt="Organization" src="org0.png"/></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg3" href="#st200_p2s1pg3">3</a></div><div class="st200_paragraph">
      The server at <span class="st200_term constant">fsl.iw.example.com</span> acts as the
      so-called <span class="st200_term term">canonical</span> repository. That is, it's
      the repository that's considered to be the authoritative source for the project.
      In the example above, <span class="st200_term constant">fsl.iw.example.com</span> is
      a server that's private to the <span class="st200_term term">ExampleCorp</span> organization,
      with the red line indicating the boundary of the <span class="st200_term term">ExampleCorp</span>
      private network.
      Developers in the organization have <span class="st200_term term">clones</span> of this
      repository on each of their workstations (<span class="st200_term constant">c0.iw.example.com</span>,
      <span class="st200_term constant">c1.iw.example.com</span>, etc). Each time a developer
      makes a change to his/her own clone of the repository, the clone is automatically
      <span class="st200_term term">synchronized</span> with the <span class="st200_term term">remote</span>
      of the clone (<span class="st200_term constant">fsl.iw.example.com</span>), pushing
      new changes to the remote and pulling any changes received by the remote since the
      last synchronization. Consequently, changes made by each developer are gradually 
      propagated to each other developer, and the <span class="st200_term constant">fsl.iw.example.com</span>
      repository.
    </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg4" href="#st200_p2s1pg4">4</a></div><div class="st200_paragraph">
      The organization then decides to create a public <span class="st200_term term">mirror</span>
      of the repository, hosted on <span class="st200_term constant">fossilhub.com</span>. This
      mirror repository may or may not allow commits and tickets to be created by
      external contributors. The <span class="st200_term constant">fossilhub.com</span>
      repository is the <span class="st200_term term">remote</span> of the 
      <span class="st200_term constant">fsl.iw.example.com</span> repository. The problem
      here is that when a developer makes a change to their own clone and synchronizes
      with <span class="st200_term constant">fsl.iw.example.com</span>, this will
      <span class="st200_term term">not</span> cause <span class="st200_term constant">fsl.iw.example.com</span>
      to synchronize with <span class="st200_term constant">fossilhub.com</span>. The effect of
      this is that the <span class="st200_term constant">fossilhub.com</span> repository will
      drift further and further out of date with respect to 
      <span class="st200_term constant">fsl.iw.example.com</span>, unless a developer manually
      logs into the <span class="st200_term constant">fsl.iw.example.com</span> server and 
      synchronizes the repository with <span class="st200_term constant">fossilhub.com</span>. 
      Also, if external contributors are allowed to make
      changes to the <span class="st200_term constant">fossilhub.com</span> repository, these
      changes will not reach <span class="st200_term constant">fsl.iw.example.com</span> (and
      by extension, each of the <span class="st200_term term">ExampleCorp</span> developers)
      until the next time that <span class="st200_term constant">fsl.iw.example.com</span> is
      manually synchronized.
    </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg5" href="#st200_p2s1pg5">5</a></div><div class="st200_paragraph">
      The <span class="st200_term package">io7m-jfprop</span> package attempts to
      implement a simple server to help alleviate the above problem. 
    </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg6" href="#st200_p2s1pg6">6</a></div><div class="st200_paragraph">
      The  <span class="st200_term package">fossil</span> program can be configured to run
      small pieces of code written in the <span class="st200_term package">TH1</span>
      scripting language whenever the person using the program performs a commit,
      or creates/edits a ticket. The scripting language is capable of making HTTP(S)
      requests. The <span class="st200_term package">io7m-jfprop</span> package
      implements a server that listens for HTTP(S) requests, and synchronizes
      repositories with their own remotes when requests appear. Essentially, each
      developer configures their own clone to send a request to the 
      <span class="st200_term package">io7m-jfprop</span> server listening
      on <span class="st200_term constant">fsl.iw.example.com</span> each time they
      commit, and the listening server then synchronizes the 
      <span class="st200_term constant">fsl.iw.example.com</span> repository with
      <span class="st200_term constant">fossilhub.com</span>. The 
      <span class="st200_term package">io7m-jfprop</span> server can also
      be configured to contact other 
      <span class="st200_term package">io7m-jfprop</span> servers when this
      occurs, to propagate changes to repositories that are even further removed
      <span class="st200_footnote_reference"><a id="st200_fn_1_ref" href="#st200_fn_1">[1]</a></span>. As an example:
    </div></div><div class="st200_formal_item diagram"><div class="st200_formal_item_title diagram"><a id="st200_p2s1fo2" href="#st200_p2s1fo2">2.1.2. Sync requests</a></div><img class="st200_image" alt="Sync requests" src="org1.png"/></div><div class="st200_formal_item"><div class="st200_formal_item_title"><a id="st200_p2s1fo3" href="#st200_p2s1fo3">2.1.3. Sync procedure</a></div><ol class="st200_list_ordered"><li class="st200_list_item">
          The developer commits to <span class="st200_term constant">c0.iw.example.com</span>,
          which causes a synchronization with <span class="st200_term constant">fsl.iw.example.com</span>.
        </li><li class="st200_list_item">
          The <span class="st200_term package">fossil</span> program on
          <span class="st200_term constant">c0.iw.example.com</span> contacts the
          <span class="st200_term package">io7m-jfprop</span> server on
          <span class="st200_term constant">fsl.iw.example.com</span>.
        </li><li class="st200_list_item">
          The <span class="st200_term package">io7m-jfprop</span> server on
          <span class="st200_term constant">fsl.iw.example.com</span> tells the
          repository to synchronize.
        </li><li class="st200_list_item">
          The repository on <span class="st200_term constant">fsl.iw.example.com</span>
          synchronizes with <span class="st200_term constant">fossilhub.com</span>.
        </li></ol></div></div><div class="st200_footnotes"><hr/><div class="st200_footnote_container"><div class="st200_footnote_number">[<a id="st200_fn_1" href="#st200_fn_1_ref">1</a>]</div><div class="st200_footnote_body">
        There is currently no protection against servers sending synchronization
        requests to each other, resulting in infinite loops.
      </div></div></div><div class="st200_navbar st200_navbar_bottom"><hr class="st200_hr"/><table class="st200_navbar_table" summary="Navigation bar"><tr><td class="st200_navbar_prev_file_cell"><a href="p2.xhtml#st200_p2">Previous</a></td><td class="st200_navbar_up_file_cell"><a href="p2.xhtml#st200_p2">Up</a></td><td class="st200_navbar_next_file_cell"><a href="p2s2.xhtml#st200_p2s2">Next</a></td></tr><tr><td class="st200_navbar_prev_title_cell">2. User Guide</td><td class="st200_navbar_up_title_cell">2. User Guide</td><td class="st200_navbar_next_title_cell">2.2. Configuration</td></tr></table></div></div></body></html>
